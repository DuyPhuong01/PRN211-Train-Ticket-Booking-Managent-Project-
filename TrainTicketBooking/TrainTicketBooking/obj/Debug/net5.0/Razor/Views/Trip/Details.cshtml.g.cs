#pragma checksum "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b3666c202f575c48949d09be3010fd67899be33a"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Trip_Details), @"mvc.1.0.view", @"/Views/Trip/Details.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
using TrainTicketBooking.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b3666c202f575c48949d09be3010fd67899be33a", @"/Views/Trip/Details.cshtml")]
    #nullable restore
    public class Views_Trip_Details : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Trip>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 6 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
  
    Layout = "_Layout";
    ViewBag.Title = "Tickets";

#line default
#line hidden
#nullable disable
            WriteLiteral("<div class=\"container-lg\">\r\n    <div class=\"my-3 row\">\r\n        <div class=\"col-4\">\r\n            <div class=\"p-3 bg-white rounded-3 shadow-sm mb-3\">\r\n                <div>\r\n                    <p>");
#nullable restore
#line 16 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                  Write(Model.Route.RouteName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                    <p>");
#nullable restore
#line 17 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                  Write(Model.Route.FromNavigation.LocationName);

#line default
#line hidden
#nullable disable
            WriteLiteral(" - ");
#nullable restore
#line 17 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                             Write(Model.Route.ToNavigation.LocationName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                    <p>");
#nullable restore
#line 18 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                  Write(Model.Train.TrainName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                    <p>");
#nullable restore
#line 19 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                   Write(Model.Time.Day);

#line default
#line hidden
#nullable disable
            WriteLiteral("/");
#nullable restore
#line 19 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                     Write(Model.Time.Month);

#line default
#line hidden
#nullable disable
            WriteLiteral("/");
#nullable restore
#line 19 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                         Write(Model.Time.Year);

#line default
#line hidden
#nullable disable
            WriteLiteral(" ");
#nullable restore
#line 19 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                            Write(Model.Time.Hour);

#line default
#line hidden
#nullable disable
            WriteLiteral(":");
#nullable restore
#line 19 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                                               Write(Model.Time.Minute);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</p>
                </div>
            </div>
            <div class=""p-3 bg-white rounded-3 shadow-sm mb-3"">
                <div>
                    <div class=""ticket-type-selector d-flex justify-content-between"">
                    </div>
                    <div class=""mt-3"">
                        <div class=""d-flex justify-content-between"">
                            <b>Vị trí</b>
                            <b>Loại</b>
                            <b>Giá</b>
                        </div>
                        <hr />
                    </div>
                    <form id=""bill-list"" action=""/cart/addtocart"" method=""post"">
                    </form>
                    <div>
                        <hr />
                        <div class=""d-flex justify-content-between"">
                            <b>Tổng</b>
                            <b><span id=""total-bill"">0</span><span> đ</span></b>
                        </div>
                    </div>
                </div>");
            WriteLiteral("\r\n                <div>\r\n                    <div class=\"d-flex justify-content-between mt-3\">\r\n                        <a class=\"btn btn-outline-danger\" onclick=\"clearlist()\">Xóa hết</a>\r\n");
#nullable restore
#line 47 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                         if(Context.Session.GetString("account") != null)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <a class=\"btn btn-outline-success\" onclick=\"addtocart()\">Thêm vào giỏ hàng</a>\r\n");
#nullable restore
#line 50 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                        } else
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <a class=\"btn btn-outline-success\" data-bs-toggle=\"modal\" data-bs-target=\"#modal-login\">Đăng nhập</a>\r\n");
#nullable restore
#line 53 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                        }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n");
#nullable restore
#line 60 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
             foreach (Carriage carriage in ViewBag.Carriages)
            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <div class=\"p-3 bg-white rounded-3 shadow-sm mb-3\">\r\n                    <div class=\"text-center\">\r\n                        <div");
            BeginWriteAttribute("class", " class=\"", 2753, "\"", 2761, 0);
            EndWriteAttribute();
            WriteLiteral("><h3>Toa tàu số ");
#nullable restore
#line 64 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                Write(carriage.CarriageNumber);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h3></div>\r\n                    </div>\r\n                    <div class=\"carriage p-3 border border-5 rounded-3\">\r\n                        <div class=\"d-flex\">\r\n");
#nullable restore
#line 68 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                             for (int i = 0; i < @carriage.Tickets.Count - 4; i += 4)
                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <div>\r\n");
#nullable restore
#line 71 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                     for (int j = i; j < i + 4; j++)
                                    {
                                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 73 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                         if (carriage.Tickets.ToList()[j].Status == 1)
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <label>\r\n                                                <input type=\"checkbox\" name=\"seat_name\"");
            BeginWriteAttribute("value", " value=\"", 3500, "\"", 3548, 1);
#nullable restore
#line 76 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
WriteAttributeValue("", 3508, carriage.Tickets.ToList()[j].TicketId, 3508, 40, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("onclick", " onclick=\"", 3549, "\"", 3626, 3);
            WriteAttributeValue("", 3559, "selectSeat(this,", 3559, 16, true);
#nullable restore
#line 76 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
WriteAttributeValue(" ", 3575, carriage.Tickets.ToList()[j].TicketPrice.Price, 3576, 49, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 3625, ")", 3625, 1, true);
            EndWriteAttribute();
            WriteLiteral(" hidden>\r\n                                                <a");
            BeginWriteAttribute("class", " class=\"", 3687, "\"", 3746, 3);
            WriteAttributeValue("", 3695, "btn", 3695, 3, true);
            WriteAttributeValue(" ", 3698, "btn-outline-success", 3699, 20, true);
#nullable restore
#line 77 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
WriteAttributeValue(" ", 3718, j==i+1 ? "mb-5" : "mb-2", 3719, 27, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">");
#nullable restore
#line 77 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                                                           Write(carriage.Tickets.ToList()[j].Row);

#line default
#line hidden
#nullable disable
#nullable restore
#line 77 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                                                                                              Write(carriage.Tickets.ToList()[j].Seat);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n                                            </label>\r\n");
#nullable restore
#line 79 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <a");
            BeginWriteAttribute("class", " class=\"", 4057, "\"", 4107, 3);
            WriteAttributeValue("", 4065, "btn", 4065, 3, true);
            WriteAttributeValue(" ", 4068, "btn-danger", 4069, 11, true);
#nullable restore
#line 82 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
WriteAttributeValue(" ", 4079, j==i+1 ? "mb-5" : "mb-2", 4080, 27, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">");
#nullable restore
#line 82 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                                              Write(carriage.Tickets.ToList()[j].Row);

#line default
#line hidden
#nullable disable
#nullable restore
#line 82 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                                                                                                                 Write(carriage.Tickets.ToList()[j].Seat);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n");
#nullable restore
#line 83 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 83 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                                         
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                </div>\r\n");
#nullable restore
#line 86 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
                            }

#line default
#line hidden
#nullable disable
            WriteLiteral("                        </div>\r\n                    </div>\r\n                </div>\r\n");
#nullable restore
#line 90 "C:\Users\Duy Phuong\Desktop\Summer 2022\PRN211\Project\GIt\PRN211-Train-Ticket-Booking-Managent-Project-\TrainTicketBooking\TrainTicketBooking\Views\Trip\Details.cshtml"
            }

#line default
#line hidden
#nullable disable
            WriteLiteral("        </div>\r\n    </div>\r\n</div>\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script>
        var type_list = [];
        $.ajax({
            type: 'POST',
            url: '/trip/GetTicketTypes',
            dataType: 'json',
            data: {
            },
            success: function(result) {
                type_list = result;
                console.log(result);
            },
            error: function(ex) {
            }
        });

        function getSelectOptionTicketPrice(){
            var result = `<select name=""type_id"" class=""form-select"">`;
            type_list.forEach(a => {
                result += `<option value=""${a.typeId}"">${a.typeName}</option>`;
            });
            return `${result}</select>`;
        }

        function selectSeat(cb, price) {
            if (cb.checked) {
                var name = $('.carriage label input[value=""' + cb.value + '""] + a').text();
                var row = '<div id=""bill-' + cb.value + '"" class=""d-flex justify-content-between align-items-center mb-2"">'
                    + '<");
                WriteLiteral(@"div><input type=""hidden"" name=""ticket_id"" value=""' + cb.value + '""></div>'
                    + '<div>' + name + '</div>'
                    + '<div>'
                    + getSelectOptionTicketPrice()
                    + '</div>'
                    + '<div class=""price"">' + price + '</div>'
                    + '</div>';

                $('#bill-list').append(row);
                $('#bill-list #bill-' + cb.value + ' select').change(function() {
                    if ($('#bill-list #bill-' + cb.value + ' select option').first().is(':selected')) {
                        $('#bill-list #bill-' + cb.value + ' .price').text(price);
                    } else {
                        $('#bill-list #bill-' + cb.value + ' .price').text(price / 2);
                    }
                    calculateTotal();
                });
            } else {
                $('#bill-list #bill-' + cb.value).remove();
            }
            calculateTotal();
        }

        function calcula");
                WriteLiteral(@"teTotal() {
            var sum = 0;
            $('#bill-list .price').each(function() {
                sum += parseInt($(this).text());

            });
            $('#total-bill').text(sum);
        }

        function clearlist() {
            $('#bill-list').html('');
            $('.carriage label input[type=""checkbox""]:checked').each(function() {
                    this.checked = false;
            });
        }
        
        function addtocart() {
            var input_list = $('input[name=""ticket_id""]');
            if(input_list.length == 0){
                alert('a');
            } else {
                $('#bill-list').submit();
            }
        }
    </script>

    ");
            }
            );
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Trip> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
